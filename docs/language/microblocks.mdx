# MicroBlocks


![MicroBlocks](pathname:///img/microblocks.png)

MicroBlocks is a blocks-language that makes it easy for beginners (9 years to adults) to program DUELink boards. A huge benefit of MicroBlocks is that it is live and
interactive: users can click commands to see what they do and they can test their scripts as they work.

Yet in spite of its apparent simplicity, MicroBlocks is a powerful programming language with the ability to interface with peripherals via GPIO, I2C, SPI, and serial;
and nearly 200 extension libraries. In fact, some hardware designers prefer MicroBlocks for rapid prototyping and testing because of its fast, interactive development cycle.

There are two ways beginners and educators can use MicroBlocks with DUELink:
1. Run **MicroBlocks on DUELink** modules/boards.
2. Use **MicroBlocks to Daisylink** modules.

---

## MicroBlocks on DUELink

While you can load MicroBlocks on any DUELink module, some are recommended on the [educators](../educators) page.


### Installing the MicroBlocks Firmware

To work with MicroBlocks, one must first install the MicroBlocks firmware,
a process that takes less than a minute.

Start by connecting your DUELink board to a laptop using a USB cable.
**Make sure it is not a charge-only cable!**

Prepare your board to accept firmware by holding down the **A** button (CincoBit or PixoBit), the left button (DueSTEM) or the **LDR** button (ClipIt) while pressing and releasing the small **Reset** or **RST** button:

<table>
<td width='50%'>
![CincoBit Reset](pathname:///img/cincoBit-reset.png)
</td>
<td width='50%'>
![pixoBit Reset](pathname:///img/pixoBit-reset.png)
</td>
</table>


<table>
<td width='50%'>
![duestem Reset](pathname:///img/duestem-reset.png)
</td>
<td width='50%'>
![clipIt Reset](pathname:///img/clipIt-reset.png)
</td>
</table>

Open [console.duelink.com](https://console.duelink.com/) in a Chrome or Edge browser:

![dueconsole](pathname:///img/duelink-console.png)

Click on the **Firmware** tab:

![firmware](pathname:///img/console-firmware.png)


In the dialog that appears, click the **Connect** button:
![console](pathname:///img/console-connect-1.png)

If your board is connected and ready to accept firmware, you will see an entry marked **DFU in FS Mode**:

![console](pathname:///img/console-connect-2.png)

If you see an entry marked **DUELink**, repeat the board preparation process described above. Remember to keep the **A** or **LDR** button held down while you press and release the **Reset** button.

If you do not see any entry, check that your board is connected to your laptop with a good USB cable.

Select the **DFU in FS Mode** entry and click the **Connect** button.

In the next dialog, select **MicroBlocks (microblocks.fun)** in the Firmware menu.

The version menu will default to the most recent version, which is what you want:

![console](pathname:///img/console-connect-3.png)

You'll see progress as the board is erased and then the firmware is written:

![progress-erasing](pathname:///img/progress-erasing.png)
![progress-writing](pathname:///img/progress-writing.png)


Congratulations! You've installed MicroBlocks!

You don't need to install MicroBlocks firmware every time you use MicroBlocks, only if you want to update to a newer version or switch between MicroBlocks and the DUELink firmware.

:::note
Although this section has focused on installing MicroBlocks on educational DUELink boards, MicroBlocks can be installed on any DUELink board. For example, one might install MicroBlocks on the Holiday Tree and write a MicroBlocks program to control the lights.
:::

Once the MicroBlocks firmware is installed, you're ready to start coding!

### Connecting the board to MicroBlocks

You can run MicroBlocks in a Chrome or Edge browser by visiting [microblocks.fun](https://microblocks.fun) and clicking the **Run** button in the top bar menu or by clicking [this link](https://microblocks.fun/run). You can also download a stand-alone app for Windows, MacOS, or Linux from the [Download page](https://microblocks.fun/download) on the website.

![Download](pathname:///img/microblocks-download.png)

The first step is to connect to the board.

Click the **Connect** button in the MicroBlocks editor:

![microblocks-connect](pathname:///img/microblocks-connect-1.png)

Select **Connect (USB)** from the menu:

![microblocks-connect](pathname:///img/microblocks-connect-2.png)

Select the DUELink board in the dialog that appears, then click the **Connect** button:

![microblocks-connect](pathname:///img/microblocks-connect-3.png)

If you do not see your DUELink board, make sure it is connected with a good USB cable, then click its reset button.

When the board is connected, the **Connect** button turns green and the name of the board is displayed next to it:

![microblocks-connect](pathname:///img/microblocks-connect-4.png)

To verify that everything is working, click on the **set user LED** block in the **Output** category:

![microblocks-setuserled](pathname:///img/microblocks-setuserled.png)

On most DUELink boards, this will turn on the green **STAT** LED. On the CincoBit, which does not have a **STAT** LED, it will turn on the middle LED in the 5x5 LED display.

### Coding in MicroBlocks

MicroBlocks is a **live** coding environment so you can test as you code.
Click on blocks and scripts to run them.

Drag blocks into the scripting pane and assemble them to create scripts.

Your code is stored in persistent flash memory and can run even when the board is not connected to the MicroBlocks editor.

Scripts under a **when started** block run when the board is powered on.

MicroBlocks supports concurrency. Up to ten scripts can run at the same time.

### Examples

Here is a simple script for the CincoBit:

![demo cinco](pathname:///img/mb-demo-cinco.png)

Here is a similar script using the ClipIt's **A** touch pad:

![demo clipit](pathname:///img/mb-demo-clipit.png)

This script displays the light level as a bar graph on the PixoBit and DueSTEM. It also shows the temperature on the DueSTEM:

![demo duestem](pathname:///img/mb-demo-duestem.png)


In addition to its many built-in blocks, MicroBlocks has nearly 200 libraries that support additional features and peripherals.
Click the **Add Library** button to add libraries.

Assuming you using a [CincoBit](../products/mccincobit-e), we will show a smiley face on the LEDs. Click on the `Add Library` button and Open the `LED Display`. This will add the 5x5 LED Matrix block.

![Connect](pathname:///img/microblocks-library.png)

Click on the block itself and it will activate the LEDs on CincoBit. Any changes we make are instantly transferred to the device.

![Smile and Frown](pathname:///img/microblocks-instant.gif)

This program will switch from a "smile" to a "frown" based the pressed button.

![Smile and Frown](pathname:///img/microblocks-smile-frown.gif)

---

## MicroBlocks to Daisylink

A user can easily [Daisylink](../engine/daisylink) several modules. In this case, MicroBlocks is running on the first module/board in the daisylink. All other modules are running the standard DUELink firmware and ready to accept commands from the first module.

![PixoBit Daisylinked](pathname:///img/pixobit-daisylinked.png)

:::tip
[Daisylinked](../engine/daisylink) modules do not need to be loaded with the MicroBlocks firmware. Only `PixoBit` (first module) is loaded with MicroBlocks firmware in the previous example.
:::     

When Daisylinking DUELink modules users need to download the DUELink libraries for MicroBlocks from the [Downloads](../downloads.mdx) page.

Once downloaded, add it to the MicroBlocks' IDE by clicking `Add Library` from the side menu. Select `Computer` from the options and navigate to the appropriate file. 

![Add DUELink Library](pathname:///img/microblocks-add-duelink.png)

This will add all the necessary blocks to control [Daisylinked](../engine/daisylink) modules.

![New DUELink Blocks](pathname:///img/microblocks-duelink-library.png)

In the example below, we'll use MicroBlocks to control an OLED 0.96 Display, a Button, and a Buzzer module Daisylinked together.

![New DUELink Blocks](pathname:///img/cincobit-daisylinked.png)

Click on the image below to download the code and then drag the downloaded `.ubp` file into the MicroBlocks IDE. This also brings in all the necessary libraries in the project. 

<a download href="/code/samples/microblocks/microblock_microbit_example_chain.ubp">![Daisylinked MicroBlocks Project](pathname:///img/microblocks-daisylinked.png)</a>

:::tip
When saving projects to share with others, use the file save feature in MicroBlocks. Saving `picture of script` as .png option won't work when using externally loaded libraries like DUELink. 
:::

---
## MicroBlocks on micro:bit

You can in theory use any board that runs MicroBlocks to daisylink DUELink modules. [micro:bit](../hw/microbit) is a fully supported option. To connect DUELink modules to micro:bit, you need an adapter that adds a JST connector. See [micro:bit](../hw/microbit) for options.

![LinkBit](pathname:///img/microbit-linkbit.png)

From this point, you can folow the instrucitons on "MicroBlocks to Daislylink" section above.

---

## Available Services

It is important to note that once a DUELink board is loaded with MicroBlocks firmware, then it becomes 100% reliant on what blocks/libraries/services are offered by MicroBlocks. In other words, you lose the DUELink [Standard Library](../engine/stdlib).

For example, while you can load MicroBlocks on [SD Card](../products/stsdcard-b) module, you do not have SD card drivers nor file system libraries!

This is not a problem in a standard DUELink setup as you will probably have one of the recommended boards loaded with MicroBlocks, but then you have other modules [daisylinked](../engine/daisylink) on its [downlink](../interface/downlink) connector. Those other linked modules will still be running the standard DUElink firmware. In this case the SD Card module will have the necessary standard libraries, which are commanded by the MicroBlocks firmware.

![Cincobit and SD Card](pathname:///img/cincobit-sdcard.png)

---

## MicroBlocks Resources

These are some useful resources:

* [Website](https://microblocks.fun)
* [User Guide](https://wiki.microblocks.fun/en/ide)
* [Blocks Reference](https://wiki.microblocks.fun/en/reference_manual)
* [Libraries Reference](https://wiki.microblocks.fun/en/libraries)
* [Learning Guides](https://learn.microblocks.fun)
