##### Button BRGB28x4 #####
fn Rset()
    cmd("reset(0)") # reset my client
    reset(0) # reset myself
fend
fn Test()
    println("Starting test...")
    Wait(1)
    dlmode(2,0)
    Wait(10)
    
    l = 0
    
    a = 1
    b = 1
    c = 1
    d = 1
    
    x = 1
    y = 1
    m = 1
    n = 1
    
    f = 0
    while (1) 
        a = dread(7,1)
        b = dread(2,1)
        c = dread(5,1)
        d = dread(3,1)
        
        if (a!=x)
            x = a
            if (a = 0)
                println("Button A pressed")
            else
                println("Button A released")
            end
        end
        
        if (b!=y)
            y = b
            if (b = 0)
                println("Button B pressed")
            else
                println("Button B released")
            end
        end
        
        if (c!=m)
            m = c
            if (c = 0)
                println("Button C pressed")
            else
                println("Button C released")
            end
        end
        
        if (d!=n)
            n = d
            if (d = 0)
                println("Button D pressed")
            else
                println("Button D released")
            end
        end
        
        

        p = -1
        for i = 0 to 4
            if (a=0)
                
                p =0
            else
                if (b=0)
                    
                    p =1
                else 
                    if (c=0)
                        
                        p =2
                    else
                        if (d=0)
                           
                            p =3
                        end
                    end
                end
            end
            
            if i = p
                SetClr(i, blue,0) 
            else
                if (l = 0)
                    SetClr(i, blue,100)
                end
                if (l = 1)
                    SetClr(i, green,100)
                end
                if (l = 2)
                    SetClr(i, red,100)
                end
            end
        next
 
        l =  (l + 1) % 3
        f = f + 1
        wait(500)
        
    wend
fend   
